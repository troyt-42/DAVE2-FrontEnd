!function(){"use strict";function e(e,t,a){var o=this;o.loading=!0;var n=angular.element("#container");a.on("importersInfo",function(e){console.log(e)}),a.on("importersData",function(e){n.highcharts("StockChart",{chart:{zoomType:"x",type:"areaspline"},title:{text:"Data Item 58-B9-E1-F1-87-89"},tooltip:{pointFormat:' | <span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',positioner:function(){return{x:10,y:100}},crosshairs:{dashStyle:"dash",color:"orange"}},plotOptions:{series:{tooltip:{dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L"}},marker:{states:{hover:{fillColor:"orange"}}},animation:!1,states:{hover:!1}}},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e  %b %Y",month:"%b"},events:{afterSetExtremes:function(){n.highcharts().showLoading("Loading data from server..."),a.emit("displayRquest",{min:this.min,max:this.max})}},minRange:6048e5},navigator:{adaptToUpdatedData:!1,series:{data:e}},scrollbar:{liveRedraw:!1},rangeSelector:{enabled:!0,allButtonsEnabled:!0,buttons:[{type:"day",count:3,text:"3d"},{type:"week",count:1,text:"1w"},{type:"month",count:1,text:"1m"},{type:"month",count:6,text:"6m"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],selected:2},series:[{name:"Data Point",data:e}]});var t=[],l=[];console.log(e.slice(0,100));for(var s=new Date(e[0][0]),i=new Date(e[e.length-1][0]),m=i.getFullYear(),r=s.getFullYear(),d=m-r,u=r;m>u;u++){t.push({id:"id_"+u,name:"Data of "+u,value:12,max:4321.241,min:1932.49,average:3284.531,dataLabels:{enabled:!0,format:'<span style="; text-shadow:none">Complete Data of<br><span style=";color:red;text-shadow:none">'+u+"</span></span>",verticalAlign:"middle"}});for(var c=1;4>=c;c++)t.push({id:"id_"+u+"_"+c,parent:"id_"+u,name:"Data of "+u+" "+c,value:1})}console.log(t.length);for(var p=r;m>p;p++)l.push([Date.UTC(p,0,0,0),12]);angular.element("#container2").highcharts("StockChart",{chart:{animation:!0},tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{point.name}</span><br>| <b>Max: </b>{point.max}<br>| <b>Min: </b>{point.min}<br>| <b>Average: </b>{point.average}',borderColor:"#3A8AD3",borderRadius:5},rangeSelector:{buttons:[{type:"millisecond",count:100/d*1,text:"1 item"},{type:"millisecond",count:100/d*2,text:"2 item"},{type:"millisecond",count:100/d*4,text:"4 items"},{type:"millisecond",count:100/d*8,text:"8 items"},{type:"millisecond",count:100/d*10,text:"10 items"}],selected:4},navigator:{enabled:!1,adaptToUpdatedData:!1,xAxis:{floor:0,ceiling:100,dateTimeLabelFormats:{millisecond:"%L",day:"%L"}}},xAxis:{events:{afterSetExtremes:function(){console.log(this)}}},plotOptions:{series:{dataGrouping:{enabled:!1}},treemap:{states:{hover:{enabled:!1}}}},series:[{type:"treemap",layoutAlgorithm:"stripes",allowDrillToNode:!0,dataLabels:{enabled:!1},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0,style:{fontSize:"1.3em"}},borderWidth:3,borderColor:"white",color:"black"},{level:2,borderColor:"#3A8AD3"}],data:t}],subtitle:{text:"Data Table"},title:{text:"58-B9-E1-F1-87-89"}});for(var b=[],I=0;100>I;I++){var g=new Date(e[I][0]);b.push([g.toUTCString(),e[I][1]])}o.tableData=b,o.loading=!1}),a.on("displayResponse",function(e){console.log(e),n.highcharts().series[0].setData(e),n.highcharts().hideLoading();for(var t=[],a=0;100>a;a++){var l=new Date(e[a][0]);t.push([l.toUTCString(),e[a][1]])}o.tableData=t})}function t(e,t,a,o,n,l,s){function i(){o.remove("dataItemListTableColumns"),void 0===o.getObject("dataItemListTableColumns")&&o.putObject("dataItemListTableColumns",v.dataItemListTableColumns),v.dataItemListTableColumns=o.getObject("dataItemListTableColumns"),v.avaliableDataItemTableColumns=o.getObject("avaliableDataItemTableColumns")||[],n.emit("requestDataItemList"),v.promiseToSolve=t(function(){for(var e=!1,t=0;t<v.alerts.length;t++)"Loading Importer List Failed. Please Check Your Internet Connection."===v.alerts[t].msg&&(e=!0);e||v.alerts.push({type:"danger",msg:"Loading Importer List Failed. Please Check Your Internet Connection."}),v.systemStatus="Error"},5e3),s.writeState("hasMenu",!1)}function m(e,t){0!==v.avaliableDataItemTableColumns.length&&(v.dataItemListTableColumns[e.index-1].status=!0,v.avaliableDataItemTableColumns.splice(t,1),o.putObject("dataItemListTableColumns",v.dataItemListTableColumns),o.putObject("avaliableDataItemTableColumns",v.avaliableDataItemTableColumns))}function r(e,t,a){if(console.log(t),13===e.keyCode)if(t.index===t.newIndex)v.addTableColumn(t,a);else{t.newIndex>v.dataItemListTableColumns.length&&(t.newIndex=v.dataItemListTableColumns.length),t.newIndex<1&&(t.newIndex=1),v.dataItemListTableColumns[t.index-1].index=t.newIndex-1,v.dataItemListTableColumns[t.newIndex-1].index=t.index-1;var n=v.dataItemListTableColumns[t.index-1];v.dataItemListTableColumns[t.index-1]=v.dataItemListTableColumns[t.newIndex-1],v.dataItemListTableColumns[t.newIndex-1]=n,t.index=t.newIndex,console.log(t),console.log(v.avaliableDataItemTableColumns),console.log(v.dataItemListTableColumns),v.addTableColumn(t,a)}o.putObject("dataItemListTableColumns",v.dataItemListTableColumns),o.putObject("avaliableDataItemTableColumns",v.avaliableDataItemTableColumns)}function d(e){angular.element("div.alert.animated#dataItemList"+e).removeClass("fadeInDown"),angular.element("div.alert.animated#dataItemList"+e).addClass("fadeOutUp"),v.alerts.splice(e,1)}function u(e){for(var t=e-1;t>=0;t--)if(v.dataItemListTableColumns[t].status){var a=v.dataItemListTableColumns[e];a.index=t,v.dataItemListTableColumns[t].index=e,v.dataItemListTableColumns[e]=v.dataItemListTableColumns[t],v.dataItemListTableColumns[t]=a;break}}function c(e){for(var t=e+1;t<v.dataItemListTableColumns.length;t++)if(v.dataItemListTableColumns[t].status){var a=v.dataItemListTableColumns[e];a.index=t,v.dataItemListTableColumns[t].index=e,v.dataItemListTableColumns[e]=v.dataItemListTableColumns[t],v.dataItemListTableColumns[t]=a;break}}function p(e){v.dataItemListTableColumns[e].status=!1,v.avaliableDataItemTableColumns.push({index:e+1,value:v.dataItemListTableColumns[e].name,newIndex:e+1}),console.log(v.avaliableDataItemTableColumns),o.putObject("dataItemListTableColumns",v.dataItemListTableColumns),o.putObject("avaliableDataItemTableColumns",v.avaliableDataItemTableColumns)}function b(t){var o=e.$parent.$new(!0);o.dataItemToRequest=t,l.DestroyDirectiveService("dave-data-item-display-list-page",e),l.AddDirectiveService(".dataItemDisplayContainer",'<dave-data-item-display-page class="angular-directive" dave-data-item="{{dataItemToRequest}}"></dave-data-item-display-page>',o,a)}function I(){angular.element(".js-layout").toggleClass("hidden")}function g(){l.EnterSearchMode("dave-data-item-display-list-page","<dave-data-item-display-list-page></dave-data-item-display-list-page>",".dataItemDisplayContainer",e,a)}var v=this;v.activate=i,v.addTableColumn=m,v.addTableColumnKeyPress=r,v.closeAlert=d,v.decreaseColumnIndex=u,v.increaseColumnIndex=c,v.removeColumn=p,v.requestDataItem=b,v.toggleLayOutMenu=I,v.toggleSearchMode=g,v.alerts=[],v.avaliableDataItemTableColumns=[],v.dataItemList=[],v.dataItemListCurrentPage=1,v.dataItemListTableColumns=[{name:"name",status:!0,index:0},{name:"location",status:!0,index:1},{name:"note",status:!0,index:2},{name:"precision",status:!0,index:3},{name:"unit",status:!0,index:4}],v.promiseToSolve="",v.search={},v.systemStatus="Normal",v.loading=!0,e.$on("socket:ipDataItemListResponse",function(e,a){console.log(e.name),"Normal"===v.systemStatus&&(t.cancel(v.promiseToSolve),1!==a.completeState?v.dataItemList=v.dataItemList.concat(a.list_out):(v.dataItemList=v.dataItemList.concat(a.list_out),v.loading=!1))}),v.activate()}function a(e,t,a,o,n,l,s){function i(){void 0===o.getObject("requestedDataItem")&&o.putObject("requestedDataItem",u.dataItemToRequest),u.dataItemToRequest=o.getObject("requestedDataItem"),o.remove("requestedDataItem"),n.emit("requestDataItem",u.dataItemToRequest)}function m(){var t=e.$parent.$new(!0);l.DestroyDirectiveService("dave-data-item-display-page",e),l.AddDirectiveService(".dataItemDisplayContainer",'<dave-data-item-display-list-page  class="angular-directive"></dave-data-item-display-list-page>',t,a)}function r(e){angular.element("div.alert.animated#dataItem"+e).removeClass("fadeInDown"),angular.element("div.alert.animated#dataItem"+e).addClass("fadeOutUp"),u.alerts.splice(e,1)}function d(){o.putObject("requestedDataItem",u.dataItemToRequest),l.EnterSearchMode("dave-data-item-display-page","<dave-data-item-display-page></dave-data-item-display-page>",".dataItemDisplayContainer",e,a)}var u=this;u.activate=i,u.backToDataItemList=m,u.closeAlert=r,u.alerts=[],u.dataItemData=[],u.dataItemToRequest=e.dataItemToRequest?JSON.parse(e.dataItemToRequest):{},u.loading=!0,u.systemStatus="Normal",u.toggleSearchMode=d;var c=angular.element("#container");e.$on("socket:ipDataItemResponse",function(e,t){if("ERROR"===t.reply){u.loading=!1;for(var a=!1,o=0;o<u.alerts.length;o++)"Loading Data Item Failed. Please Check Your Internet Connection."===u.alerts[o].msg&&(a=!0);a||u.alerts.push({type:"danger",msg:"Loading Data Item Failed. Please Check Your Internet Connection."}),u.systemStatus="Error"}else 1!==t.completeState?u.dataItemData=u.dataItemData.concat(t.list_out):(u.dataItemData=u.dataItemData.concat(t.list_out),console.log(u.dataItemData.length),u.loading=!1,c.highcharts("StockChart",{chart:{zoomType:"x",type:"spline"},title:{text:u.dataItemToRequest.name},tooltip:{pointFormat:' | <span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b>',positioner:function(){return{x:0,y:0}},crosshairs:{color:"black"}},plotOptions:{series:{tooltip:{dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L"}},marker:{states:{hover:{}}},animation:!0,states:{hover:!1},lineWidth:1}},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e  %b %Y",month:"%b"},events:{afterSetExtremes:function(){c.highcharts().showLoading("Loading data from server..."),n.emit("ipAsychLoadingDataRequest",{min:this.min,max:this.max,name:u.dataItemToRequest.name,location:u.dataItemToRequest.location})}},minRange:1e4},navigator:{adaptToUpdatedData:!1,series:{data:u.dataItemData}},scrollbar:{liveRedraw:!1},rangeSelector:{enabled:!0,buttonTheme:{fill:"orange",stroke:"none","stroke-width":0,r:8,style:{color:"#000",fontWeight:"bold"},states:{hover:{},select:{fill:"black",style:{color:"white"}}}},buttons:[{type:"second",count:30,text:"30s"},{type:"minute",count:1,text:"1m"},{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:3,text:"3h"},{type:"all",text:"All"}],selected:2},series:[{name:"Data Point",data:u.dataItemData}]}))}),e.$on("socket:ipAsychLoadingDataResponse",function(e,t){console.log(e.name),c.highcharts().series[0].setData(t),c.highcharts().hideLoading()}),u.activate()}angular.module("Dave2.DataItemDisplay").controller("DataItemDisplayCtrl",e).controller("DaveDataItemDisplayListPageCtrl",t).controller("DaveDataItemDisplayPageCtrl",a),e.$inject=["$scope","$timeout","DataItemDisplaySocket"],t.$inject=["$scope","$timeout","$compile","$cookies","DataItemDisplaySocket","DirectiveService","generalStateWRS"],a.$inject=["$scope","$timeout","$compile","$cookies","DataItemDisplaySocket","DirectiveService","generalStateWRS"]}();